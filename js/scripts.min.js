!function(t,e){var n=typeof{},r=function(t,e){return typeof t===e},i=function(t){return r(t,"string")},a=function(t){return r(t,"undefined")},c=function(t){return r(t,"function")},o=function(t){return r(t,n)},u=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},s=function(n){function r(t){var e=t||{};return w.extend({attr:"",label:"",view:"attr",text:"",className:"",hide:!1},e)}function l(t,e){return(c(e.view)?e.view:i(e.view)&&c(h[e.view])?h[e.view]:h.attr).call(w,t,e)}function d(){if(!w.isReady){try{e.documentElement.doScroll("left")}catch(t){return void setTimeout(d,1)}w.init()}}var f,h,p={MooTools:"$$",Prototype:"$$",jQuery:"*"},m=0,g={},y=n||"simpleCart",v={},_={},b={},x=t.localStorage,C=t.console||{msgs:[],log:function(t){C.msgs.push(t)}},k={USD:{code:"USD",symbol:"&#36;",name:"US Dollar"},RUB:{code:"RUB",symbol:" &#8381;",name:"Рубль"}},S={checkout:{type:"PayPal",email:"you@yours.com"},currency:"RUB",language:"english-us",cartStyle:"div",cartColumns:[{view:function(t,e){return'<div class="cart-item"><img src="'+t.get("thumb")+'" alt="snus"><div class="cart-product d-inline-block"><span class="cart-product-name">'+t.get("name")+'</span><br><span class="cart-product-price">'+t.get("price")+' &#8381;</span> &times; <span class="item-quantity"><input type="text" maxlength="3" value="'+t.get("quantity")+'" class="simpleCart_input" onkeypress="return event.charCode >= 48 && event.charCode <= 57"></span> &#61; '+t.get("total")+' &#8381;</div><span class="item-remove"><a href="javascript:;" class="close simpleCart_remove">×</a></span></div>'},attr:"custom"}],excludeFromCheckout:["thumb"],shippingFlatRate:0,shippingQuantityRate:0,shippingTotalRate:0,shippingCustom:null,taxRate:0,taxShipping:!1,data:{}},w=function(t){return c(t)?w.ready(t):o(t)?w.extend(S,t):void 0};return w.extend=function(t,e){var n;a(e)&&(e=t,t=w);for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},w.extend({copy:function(t){var e=s(t);return e.init(),e}}),w.extend({isReady:!1,add:function(t,e){var n,r=t||{},i=new w.Item(r),c=!0===e&&e;return!(!c&&!1===w.trigger("beforeAdd",[i]))&&((n=w.has(i))?(n.increment(i.quantity()),i=n):g[i.id()]=i,w.update(),c||w.trigger("afterAdd",[i,a(n)]),i)},each:function(t,e){var n,r,i,a=0;if(c(t))r=t,i=g;else{if(!c(e))return;r=e,i=t}for(n in i)if(Object.prototype.hasOwnProperty.call(i,n)){if(!1===r.call(w,i[n],a,n))return;a+=1}},find:function(t){var e=[];return o(g[t])?g[t]:o(t)?(w.each(function(n){var r=!0;w.each(t,function(t,e,a){return i(t)?t.match(/<=.*/)?(t=parseFloat(t.replace("<=","")),n.get(a)&&parseFloat(n.get(a))<=t||(r=!1)):t.match(/</)?(t=parseFloat(t.replace("<","")),n.get(a)&&parseFloat(n.get(a))<t||(r=!1)):t.match(/>=/)?(t=parseFloat(t.replace(">=","")),n.get(a)&&parseFloat(n.get(a))>=t||(r=!1)):t.match(/>/)?(t=parseFloat(t.replace(">","")),n.get(a)&&parseFloat(n.get(a))>t||(r=!1)):n.get(a)&&n.get(a)===t||(r=!1):n.get(a)&&n.get(a)===t||(r=!1),r}),r&&e.push(n)}),e):a(t)?(w.each(function(t){e.push(t)}),e):e},items:function(){return this.find()},has:function(t){var e=!1;return w.each(function(n){n.equals(t)&&(e=n)}),e},empty:function(){var t={};w.each(function(e){!1===e.remove(!0)&&(t[e.id()]=e)}),g=t,w.update()},quantity:function(){var t=0;return w.each(function(e){t+=e.quantity()}),t},total:function(){var t=0;return w.each(function(e){t+=e.total()}),t},grandTotal:function(){return w.total()+w.tax()+w.shipping()},update:function(){w.save(),w.trigger("update")},init:function(){w.load(),w.update(),w.ready()},$:function(t){return new w.ELEMENT(t)},$create:function(t){return w.$(e.createElement(t))},setupViewTool:function(){var e,n,r,i=t;for(r in p)if(Object.prototype.hasOwnProperty.call(p,r)&&t[r]&&(e=p[r].replace("*",r).split("."),(n=e.shift())&&(i=i[n]),"function"==typeof i))return f=i,void w.extend(w.ELEMENT._,v[r])},ids:function(){var t=[];return w.each(function(e){t.push(e.id())}),t},save:function(){w.trigger("beforeSave");var t={};w.each(function(e){t[e.id()]=w.extend(e.fields(),e.options())}),x.setItem(y+"_items",JSON.stringify(t)),w.trigger("afterSave")},load:function(){g={};var t=x.getItem(y+"_items");if(t){try{w.each(JSON.parse(t),function(t){w.add(t,!0)})}catch(t){w.error("Error Loading data: "+t)}w.trigger("load")}},ready:function(t){c(t)?w.isReady?t.call(w):w.bind("ready",t):a(t)&&!w.isReady&&(w.trigger("ready"),w.isReady=!0)},error:function(t){var e="";i(t)?e=t:o(t)&&i(t.message)&&(e=t.message);try{C.log("simpleCart(js) Error: "+e)}catch(t){}w.trigger("error",[t])}}),w.extend({tax:function(){var t=S.taxShipping?w.total()+w.shipping():w.total(),e=w.taxRate()*t;return w.each(function(t){t.get("tax")?e+=t.get("tax"):t.get("taxRate")&&(e+=t.get("taxRate")*t.total())}),parseFloat(e)},taxRate:function(){return S.taxRate||0},shipping:function(t){if(!c(t)){var e=S.shippingQuantityRate*w.quantity()+S.shippingTotalRate*w.total()+S.shippingFlatRate;return c(S.shippingCustom)&&(e+=S.shippingCustom.call(w)),w.each(function(t){e+=parseFloat(t.get("shipping")||0)}),parseFloat(e)}w({shippingCustom:t})}}),h={attr:function(t,e){return t.get(e.attr)||""},currency:function(t,e){return w.toCurrency(t.get(e.attr)||0)},link:function(t,e){return"<a href='"+t.get(e.attr)+"'>"+e.text+"</a>"},decrement:function(t,e){return"<a href='javascript:;' class='"+y+"_decrement'>"+(e.text||"-")+"</a>"},increment:function(t,e){return"<a href='javascript:;' class='"+y+"_increment'>"+(e.text||"+")+"</a>"},image:function(t,e){return"<img src='"+t.get(e.attr)+"'/>"},input:function(t,e){return"<input type='text' value='"+t.get(e.attr)+"' class='"+y+"_input'/>"},remove:function(t,e){return"<a href='javascript:;' class='"+y+"_remove'>"+(e.text||"X")+"</a>"}},w.extend({writeCart:function(t){var e,n,i,a,c,o=S.cartStyle.toLowerCase(),u="table"===o,s=u?"tr":"div",l=u?"th":"div",d=u?"td":"div",f=u?"thead":"div",h=w.$create(o),p=w.$create(f),m=w.$create(s).addClass("headerRow");for(w.$(t).html(" ").append(h),h.append(p),p.append(m),a=0,c=S.cartColumns.length;a<c;a+=1)n="item-"+((e=r(S.cartColumns[a])).attr||e.view||e.label||e.text||"cell")+" "+e.className,i=e.label||"",m.append(w.$create(l).addClass(n).html(i));return w.each(function(t,e){w.createCartRow(t,e,s,d,h)}),h},createCartRow:function(t,e,n,a,c){var o,u,s,d,f,h,p=w.$create(n).addClass("itemRow row-"+e+" "+(e%2?"even":"odd")).attr("id","cartItem_"+t.id());for(c.append(p),o=0,u=S.cartColumns.length;o<u;o+=1)d="item-"+((s=r(S.cartColumns[o])).attr||(i(s.view)?s.view:s.label||s.text||"cell"))+" "+s.className,f=l(t,s),h=w.$create(a).addClass(d).html(f),p.append(h);return p}}),w.Item=function(t){function e(){i(n.price)&&(n.price=parseFloat(n.price.replace(w.currency().decimal,".").replace(/[^0-9\.]+/gi,""))),isNaN(n.price)&&(n.price=0),n.price<0&&(n.price=0),i(n.quantity)&&(n.quantity=parseInt(n.quantity.replace(w.currency().delimiter,""),10)),isNaN(n.quantity)&&(n.quantity=1),n.quantity<=0&&r.remove()}var n={},r=this;for(o(t)&&w.extend(n,t),m+=1,n.id=n.id||"SCI-"+m;!a(g[n.id]);)m+=1,n.id="SCI-"+m;r.get=function(t,e){var i=!e;return a(t)?t:c(n[t])?n[t].call(r):a(n[t])?c(r[t])&&i?r[t].call(r):!a(r[t])&&i?r[t]:n[t]:n[t]},r.set=function(t,i){return a(t)||(n[t.toLowerCase()]=i,"price"!==t.toLowerCase()&&"quantity"!==t.toLowerCase()||e()),r},r.equals=function(t){for(var e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&"quantity"!==e&&"id"!==e&&t.get(e)!==n[e])return!1;return!0},r.options=function(){var t={};return w.each(n,function(e,n,i){var a=!0;w.each(r.reservedFields(),function(t){return t===i&&(a=!1),a}),a&&(t[i]=r.get(i))}),t},e()},w.Item._=w.Item.prototype={increment:function(t){var e=t||1;return e=parseInt(e,10),this.quantity(this.quantity()+e),this.quantity()<1?(this.remove(),null):this},decrement:function(t){var e=t||1;return this.increment(-parseInt(e,10))},remove:function(t){return!1!==w.trigger("beforeRemove",[g[this.id()]])&&(delete g[this.id()],t||w.update(),null)},reservedFields:function(){return["quantity","id","item_number","price","name","shipping","tax","taxRate"]},fields:function(){var t={},e=this;return w.each(e.reservedFields(),function(n){e.get(n)&&(t[n]=e.get(n))}),t},quantity:function(t){return a(t)?parseInt(this.get("quantity",!0)||1,10):this.set("quantity",t)},price:function(t){return a(t)?parseFloat(this.get("price",!0).toString().replace(w.currency().symbol,"").replace(w.currency().delimiter,"")||1):this.set("price",parseFloat(t.toString().replace(w.currency().symbol,"").replace(w.currency().delimiter,"")))},id:function(){return this.get("id",!1)},total:function(){return this.quantity()*this.price()}},w.extend({checkout:function(){if("custom"===S.checkout.type.toLowerCase()&&c(S.checkout.fn))S.checkout.fn.call(w,S.checkout);else if(c(w.checkout[S.checkout.type])){var t=w.checkout[S.checkout.type].call(w,S.checkout);t.data&&t.action&&t.method&&!1!==w.trigger("beforeCheckout",[t.data])&&w.generateAndSendForm(t)}else w.error("No Valid Checkout Method Specified")},extendCheckout:function(t){return w.extend(w.checkout,t)},generateAndSendForm:function(t){var e=w.$create("form");e.attr("style","display:none;"),e.attr("action",t.action),e.attr("method",t.method),w.each(t.data,function(t,n,r){e.append(w.$create("input").attr("type","hidden").attr("name",r).val(t))}),w.$("body").append(e),e.el.submit(),e.remove()}}),w.extendCheckout({PayPal:function(t){if(!t.email)return w.error("No email provided for PayPal checkout");var e={cmd:"_cart",upload:"1",currency_code:w.currency().code,business:t.email,rm:"GET"===t.method?"0":"2",tax_cart:(1*w.tax()).toFixed(2),handling_cart:(1*w.shipping()).toFixed(2),charset:"utf-8"},n=t.sandbox?"https://www.sandbox.paypal.com/cgi-bin/webscr":"https://www.paypal.com/cgi-bin/webscr",r="GET"===t.method?"GET":"POST";return t.success&&(e.return=t.success),t.cancel&&(e.cancel_return=t.cancel),t.notify&&(e.notify_url=t.notify),w.each(function(t,n){var r,i=n+1,a=t.options(),c=0;e["item_name_"+i]=t.get("name"),e["quantity_"+i]=t.quantity(),e["amount_"+i]=(1*t.price()).toFixed(2),e["item_number_"+i]=t.get("item_number")||i,w.each(a,function(t,n,a){n<10&&(r=!0,w.each(S.excludeFromCheckout,function(t){t===a&&(r=!1)}),r&&(c+=1,e["on"+n+"_"+i]=a,e["os"+n+"_"+i]=t))}),e["option_index_"+n]=Math.min(10,c)}),{action:n,method:r,data:e}},GoogleCheckout:function(t){if(!t.merchantID)return w.error("No merchant id provided for GoogleCheckout");if("USD"!==w.currency().code&&"GBP"!==w.currency().code)return w.error("Google Checkout only accepts USD and GBP");var e={ship_method_name_1:"Shipping",ship_method_price_1:w.shipping(),ship_method_currency_1:w.currency().code,_charset_:""},n="https://checkout.google.com/api/checkout/v2/checkoutForm/Merchant/"+t.merchantID,r="GET"===t.method?"GET":"POST";return w.each(function(t,n){var r,i=n+1,a=[];e["item_name_"+i]=t.get("name"),e["item_quantity_"+i]=t.quantity(),e["item_price_"+i]=t.price(),e["item_currency_ "+i]=w.currency().code,e["item_tax_rate"+i]=t.get("taxRate")||w.taxRate(),w.each(t.options(),function(t,e,n){r=!0,w.each(S.excludeFromCheckout,function(t){t===n&&(r=!1)}),r&&a.push(n+": "+t)}),e["item_description_"+i]=a.join(", ")}),{action:n,method:r,data:e}},AmazonPayments:function(t){if(!t.merchant_signature)return w.error("No merchant signature provided for Amazon Payments");if(!t.merchant_id)return w.error("No merchant id provided for Amazon Payments");if(!t.aws_access_key_id)return w.error("No AWS access key id provided for Amazon Payments");var e={aws_access_key_id:t.aws_access_key_id,merchant_signature:t.merchant_signature,currency_code:w.currency().code,tax_rate:w.taxRate(),weight_unit:t.weight_unit||"lb"},n="https://payments"+(t.sandbox?"-sandbox":"")+".amazon.com/checkout/"+t.merchant_id,r="GET"===t.method?"GET":"POST";return w.each(function(n,r){var i=r+1,a=[];e["item_title_"+i]=n.get("name"),e["item_quantity_"+i]=n.quantity(),e["item_price_"+i]=n.price(),e["item_sku_ "+i]=n.get("sku")||n.id(),e["item_merchant_id_"+i]=t.merchant_id,n.get("weight")&&(e["item_weight_"+i]=n.get("weight")),S.shippingQuantityRate&&(e["shipping_method_price_per_unit_rate_"+i]=S.shippingQuantityRate),w.each(n.options(),function(t,e,n){var r=!0;w.each(S.excludeFromCheckout,function(t){t===n&&(r=!1)}),r&&"weight"!==n&&"tax"!==n&&a.push(n+": "+t)}),e["item_description_"+i]=a.join(", ")}),{action:n,method:r,data:e}},SendForm:function(t){if(!t.url)return w.error("URL required for SendForm Checkout");var e={currency:w.currency().code,shipping:w.shipping(),tax:w.tax(),taxRate:w.taxRate(),itemCount:w.find({}).length},n=t.url,r="GET"===t.method?"GET":"POST";return w.each(function(t,n){var r,i=n+1,a=[];e["item_name_"+i]=t.get("name"),e["item_quantity_"+i]=t.quantity(),e["item_price_"+i]=t.price(),w.each(t.options(),function(t,e,n){r=!0,w.each(S.excludeFromCheckout,function(t){t===n&&(r=!1)}),r&&a.push(n+": "+t)}),e["item_options_"+i]=a.join(", ")}),t.success&&(e.return=t.success),t.cancel&&(e.cancel_return=t.cancel),t.extra_data&&(e=w.extend(e,t.extra_data)),{action:n,method:r,data:e}}}),_={bind:function(t,e){if(!c(e))return this;this._events||(this._events={});var n=t.split(/ +/);return w.each(n,function(t){!0===this._events[t]?e.apply(this):a(this._events[t])?this._events[t]=[e]:this._events[t].push(e)}),this},trigger:function(t,e){var n,r,i=!0;if(this._events||(this._events={}),!a(this._events[t])&&c(this._events[t][0]))for(n=0,r=this._events[t].length;n<r;n+=1)i=this._events[t][n].apply(this,e||[]);return!1!==i}},_.on=_.bind,w.extend(_),w.extend(w.Item._,_),b={beforeAdd:null,afterAdd:null,load:null,beforeSave:null,afterSave:null,update:null,ready:null,checkoutSuccess:null,checkoutFail:null,beforeCheckout:null,beforeRemove:null},w(b),w.each(b,function(t,e,n){w.bind(n,function(){c(S[n])&&S[n].apply(this,arguments)})}),w.extend({toCurrency:function(t,e){var n=parseFloat(t),r=e||{},i=w.extend(w.extend({symbol:"&#8381;",decimal:" ",delimiter:",",accuracy:0,after:!0},w.currency()),r),a=n.toFixed(i.accuracy).split("."),c=a[1],o=a[0];return o=w.chunk(o.reverse(),3).join(i.delimiter.reverse()).reverse(),(i.after?"":i.symbol)+o+(c?i.decimal+c:"")+(i.after?i.symbol:"")},chunk:function(t,e){return void 0===e&&(e=2),t.match(new RegExp(".{1,"+e+"}","g"))||[]}}),String.prototype.reverse=function(){return this.split("").reverse().join("")},w.extend({currency:function(t){if(i(t)&&!a(k[t]))S.currency=t;else{if(!o(t))return k[S.currency];k[t.code]=t,S.currency=t.code}}}),w.extend({bindOutlets:function(t){w.each(t,function(t,e,n){w.bind("update",function(){w.setOutlet("."+y+"_"+n,t)})})},setOutlet:function(t,e){var n=e.call(w,t);o(n)&&n.el?w.$(t).html(" ").append(n):a(n)||w.$(t).html(n)},bindInputs:function(t){w.each(t,function(t){w.setInput("."+y+"_"+t.selector,t.event,t.callback)})},setInput:function(t,e,n){w.$(t).live(e,n)}}),w.ELEMENT=function(t){this.create(t),this.selector=t||null},w.extend(v,{MooTools:{text:function(t){return this.attr("text",t)},html:function(t){return this.attr("html",t)},val:function(t){return this.attr("value",t)},attr:function(t,e){return a(e)?this.el[0]&&this.el[0].get(t):(this.el.set(t,e),this)},remove:function(){return this.el.dispose(),null},addClass:function(t){return this.el.addClass(t),this},removeClass:function(t){return this.el.removeClass(t),this},append:function(t){return this.el.adopt(t.el),this},each:function(t){return c(t)&&w.each(this.el,function(e,n,r){t.call(n,n,e,r)}),this},click:function(t){return c(t)?this.each(function(e){e.addEvent("click",function(n){t.call(e,n)})}):a(t)&&this.el.fireEvent("click"),this},live:function(t,e){var n=this.selector;c(e)&&w.$("body").el.addEvent(t+":relay("+n+")",function(t,n){e.call(n,t)})},match:function(t){return this.el.match(t)},parent:function(){return w.$(this.el.getParent())},find:function(t){return w.$(this.el.getElements(t))},closest:function(t){return w.$(this.el.getParent(t))},descendants:function(){return this.find("*")},tag:function(){return this.el[0].tagName},submit:function(){return this.el[0].submit(),this},create:function(t){this.el=f(t)}},Prototype:{text:function(t){return a(t)?this.el[0].innerHTML:(this.each(function(e,n){$(n).update(t)}),this)},html:function(t){return this.text(t)},val:function(t){return this.attr("value",t)},attr:function(t,e){return a(e)?this.el[0].readAttribute(t):(this.each(function(n,r){$(r).writeAttribute(t,e)}),this)},append:function(t){return this.each(function(e,n){t.el?t.each(function(t,e){$(n).appendChild(e)}):u(t)&&$(n).appendChild(t)}),this},remove:function(){return this.each(function(t,e){$(e).remove()}),this},addClass:function(t){return this.each(function(e,n){$(n).addClassName(t)}),this},removeClass:function(t){return this.each(function(e,n){$(n).removeClassName(t)}),this},each:function(t){return c(t)&&w.each(this.el,function(e,n,r){t.call(n,n,e,r)}),this},click:function(t){return c(t)?this.each(function(e,n){$(n).observe("click",function(e){t.call(n,e)})}):a(t)&&this.each(function(t,e){$(e).fire("click")}),this},live:function(t,n){if(c(n)){var r=this.selector;e.observe(t,function(t,e){e===f(t).findElement(r)&&n.call(e,t)})}},parent:function(){return w.$(this.el.up())},find:function(t){return w.$(this.el.getElementsBySelector(t))},closest:function(t){return w.$(this.el.up(t))},descendants:function(){return w.$(this.el.descendants())},tag:function(){return this.el.tagName},submit:function(){this.el[0].submit()},create:function(t){i(t)?this.el=f(t):u(t)&&(this.el=[t])}},jQuery:{passthrough:function(t,e){return a(e)?this.el[t]():(this.el[t](e),this)},text:function(t){return this.passthrough("text",t)},html:function(t){return this.passthrough("html",t)},val:function(t){return this.passthrough("val",t)},append:function(t){var e=t.el||t;return this.el.append(e),this},attr:function(t,e){return a(e)?this.el.attr(t):(this.el.attr(t,e),this)},remove:function(){return this.el.remove(),this},addClass:function(t){return this.el.addClass(t),this},removeClass:function(t){return this.el.removeClass(t),this},each:function(t){return this.passthrough("each",t)},click:function(t){return this.passthrough("click",t)},live:function(t,n){return f(e).delegate(this.selector,t,n),this},parent:function(){return w.$(this.el.parent())},find:function(t){return w.$(this.el.find(t))},closest:function(t){return w.$(this.el.closest(t))},tag:function(){return this.el[0].tagName},descendants:function(){return w.$(this.el.find("*"))},submit:function(){return this.el.submit()},create:function(t){this.el=f(t)}}}),w.ELEMENT._=w.ELEMENT.prototype,w.ready(w.setupViewTool),w.ready(function(){w.bindOutlets({total:function(){return w.toCurrency(w.total())},quantity:function(){return w.quantity()},items:function(t){w.writeCart(t)},tax:function(){return w.toCurrency(w.tax())},taxRate:function(){return w.taxRate().toFixed()},shipping:function(){return w.toCurrency(w.shipping())},grandTotal:function(){return w.toCurrency(w.grandTotal())}}),w.bindInputs([{selector:"checkout",event:"click",callback:function(){w.checkout()}},{selector:"empty",event:"click",callback:function(){w.empty()}},{selector:"increment",event:"click",callback:function(){w.find(w.$(this).closest(".itemRow").attr("id").split("_")[1]).increment(),w.update()}},{selector:"decrement",event:"click",callback:function(){w.find(w.$(this).closest(".itemRow").attr("id").split("_")[1]).decrement(),w.update()}},{selector:"remove",event:"click",callback:function(){w.find(w.$(this).closest(".itemRow").attr("id").split("_")[1]).remove()}},{selector:"input",event:"change",callback:function(){var t=w.$(this),e=t.parent(),n=e.attr("class").split(" ");w.each(n,function(n){if(n.match(/item-.+/i)){var r=n.split("-")[1];return w.find(e.closest(".itemRow").attr("id").split("_")[1]).set(r,t.val()),void w.update()}})}},{selector:"shelfItem .item_add",event:"click",callback:function(){var t={};w.$(this).closest("."+y+"_shelfItem").descendants().each(function(e,n){var r=w.$(n);r.attr("class")&&r.attr("class").match(/item_.+/)&&!r.attr("class").match(/item_add/)&&w.each(r.attr("class").split(" "),function(e){var n,i,a;if(e.match(/item_.+/)){switch(n=e.split("_")[1],i="",r.tag().toLowerCase()){case"input":case"textarea":case"select":(a=r.attr("type"))&&("checkbox"!==a.toLowerCase()&&"radio"!==a.toLowerCase()||!r.attr("checked"))&&"text"!==a.toLowerCase()&&"number"!==a.toLowerCase()||(i=r.val());break;case"img":i=r.attr("src");break;default:i=r.text()}null!==i&&""!==i&&(t[n.toLowerCase()]=t[n.toLowerCase()]?t[n.toLowerCase()]+", "+i:i)}})}),w.add(t)}}])}),e.addEventListener?t.DOMContentLoaded=function(){e.removeEventListener("DOMContentLoaded",DOMContentLoaded,!1),w.init()}:e.attachEvent&&(t.DOMContentLoaded=function(){"complete"===e.readyState&&(e.detachEvent("onreadystatechange",DOMContentLoaded),w.init())}),function(){if("complete"===e.readyState)return setTimeout(w.init,1);if(e.addEventListener)e.addEventListener("DOMContentLoaded",DOMContentLoaded,!1),t.addEventListener("load",w.init,!1);else if(e.attachEvent){e.attachEvent("onreadystatechange",DOMContentLoaded),t.attachEvent("onload",w.init);var n=!1;try{n=null===t.frameElement}catch(t){}e.documentElement.doScroll&&n&&d()}}(),w};t.simpleCart=s()}(window,document);var JSON;JSON||(JSON={}),function(){function k(t){return t<10?"0"+t:t}function o(t){return p.lastIndex=0,p.test(t)?'"'+t.replace(p,function(t){var e=r[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function l(t,r){var a,c,u,s,d,f=e,h=r[t];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),"function"==typeof i&&(h=i.call(r,t,h)),typeof h){case"string":return o(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(e+=n,d=[],"[object Array]"===Object.prototype.toString.apply(h)){for(s=h.length,a=0;a<s;a+=1)d[a]=l(a,h)||"null";return u=0===d.length?"[]":e?"[\n"+e+d.join(",\n"+e)+"\n"+f+"]":"["+d.join(",")+"]",e=f,u}if(i&&"object"==typeof i)for(s=i.length,a=0;a<s;a+=1)"string"==typeof i[a]&&(c=i[a],(u=l(c,h))&&d.push(o(c)+(e?": ":":")+u));else for(c in h)Object.prototype.hasOwnProperty.call(h,c)&&(u=l(c,h))&&d.push(o(c)+(e?": ":":")+u);return u=0===d.length?"{}":e?"{\n"+e+d.join(",\n"+e)+"\n"+f+"}":"{"+d.join(",")+"}",e=f,u}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+k(this.getUTCMonth()+1)+"-"+k(this.getUTCDate())+"T"+k(this.getUTCHours())+":"+k(this.getUTCMinutes())+":"+k(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var q=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,n,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,r,a){var c;if(n=e="","number"==typeof a)for(c=0;c<a;c+=1)n+=" ";else"string"==typeof a&&(n=a);if((i=r)&&"function"!=typeof r&&("object"!=typeof r||"number"!=typeof r.length))throw Error("JSON.stringify");return l("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(a,e){function c(t,n){var r,i,a=t[n];if(a&&"object"==typeof a)for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(void 0!==(i=c(a,r))?a[r]=i:delete a[r]);return e.call(t,n,a)}var d,a=String(a);if(q.lastIndex=0,q.test(a)&&(a=a.replace(q,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"==typeof e?c({"":d},""):d;throw new SyntaxError("JSON.parse")})}(),function(){if(!this.localStorage)if(this.globalStorage)try{this.localStorage=this.globalStorage}catch(t){}else{var t=document.createElement("div");if(t.style.display="none",document.getElementsByTagName("head")[0].appendChild(t),t.addBehavior){t.addBehavior("#default#userdata");var e=this.localStorage={length:0,setItem:function(e,r){t.load("localStorage"),e=n(e),t.getAttribute(e)||this.length++,t.setAttribute(e,r),t.save("localStorage")},getItem:function(e){return t.load("localStorage"),e=n(e),t.getAttribute(e)},removeItem:function(e){t.load("localStorage"),e=n(e),t.removeAttribute(e),t.save("localStorage"),this.length=0},clear:function(){t.load("localStorage");for(var e=0;attr=t.XMLDocument.documentElement.attributes[e++];)t.removeAttribute(attr.name);t.save("localStorage"),this.length=0},key:function(e){return t.load("localStorage"),t.XMLDocument.documentElement.attributes[e]}},n=function(t){return t.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-")};t.load("localStorage"),e.length=t.XMLDocument.documentElement.attributes.length}}}(),$(function(){function t(){simpleCart.ready(function(){$(".del").remove(),simpleCart.each(function(t,n){e.append('<input class="del" type="hidden" name="'+t.get("id")+' Название" value="'+t.get("name")+'">'),e.append('<input class="del" type="hidden" name="'+t.get("id")+' Количество" value="'+t.get("quantity")+'">'),e.append('<input class="del" type="hidden" name="'+t.get("id")+' Цена за еденицу" value="'+t.get("price")+'">'),e.append('<input class="del" type="hidden" name="'+t.get("id")+' Общая стоимость" value="'+t.get("total")+'">')})})}var e=$("#contact-form");simpleCart({cartStyle:"div"}),simpleCart.currency({code:"RUB",name:"Рубль",symbol:" &#8381;",delimiter:" ",decimal:",",after:!0,accuracy:0}),t(),simpleCart.bind("update",function(){t()}),$("#txtboxToFilter").keydown(function(t){-1!==$.inArray(t.keyCode,[46,8,9,27,13,110,190])||65==t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||67==t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||88==t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||t.keyCode>=35&&t.keyCode<=39||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()}),e.submit(function(t){t.preventDefault(),$.ajax({url:"//formspree.io/snus.msi@gmail.ru",method:"POST",data:e.serialize(),dataType:"json"}).done(function(){$("#phone").val(""),$("#message").val(""),simpleCart.empty(),$("#checkout").html('<div class="text-center"><h1>Спасибо за заказ</h1><p>Ожидайте, мы с Вами свяжемся в течении суток</p><p><a href="/">Перейти на главную</a></p></div>')}).fail(function(){alert("Ошибка")})})});